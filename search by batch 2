#include<stdio.h>
#include<stdlib.h>
#include"header.h"

void searchbybatch()

{
        printf("\n    =======================================\n");

        int a,b,i,x,y,j=0,n;

        printf("\n \tEnter the batch no: (example: 11, 06...)\n");

        scanf("%d",&a);

        b=a%10;
        a/=10;
        FILE *fp= fopen("info.txt", "r");
        printf("\n\n");

        for(i=0; i<3; i++)
        {

            fgets(student[i].name, 22, fp);
            fgets(student[i].address, 82, fp);
            fgets(student[i].roll, 10, fp);
            fscanf(fp, "%d\n", &student[i].reg);
            x=student[i].roll[4]-48;
            y=student[i].roll[5]-48;

            if(x==a && y==b)
            {
            printf("  Student no %d\n\n", j+1);
            printf(" \tName   : %s \tAddress: %s \tRoll   : %s \tReg    : %d\n\n", student[i].name,student[i].address, student[i].roll, student[i].reg);
            j++;
            }
        }

        fclose(fp);
lab:
    printf("\n\n\tTo go to menu, press 0\n\telse to exit, press 1.\n\n");

    printf("\tEnter your choice: ");
    scanf("%d", &n);
    if(n==0) menu();
    else if (n==1) return 0;
    else
    {
        printf(" wrong input, lets try again.\n");
        goto lab;
    }


}
